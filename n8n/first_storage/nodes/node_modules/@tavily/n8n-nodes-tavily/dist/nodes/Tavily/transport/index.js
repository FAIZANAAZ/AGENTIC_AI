"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.tavilyApiRequest = void 0;
async function tavilyApiRequest(method, resource, body = {}, query = {}, uri, headers = {}, option = { json: true }) {
    const credentials = await this.getCredentials('tavilyApi');
    let apiURL = `https://api.tavily.com${resource}`;
    const options = {
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${credentials.apiKey}`,
        },
        method,
        body,
        qs: query,
        uri: uri || apiURL,
    };
    try {
        Object.assign(options, option);
        if (Object.keys(headers).length !== 0) {
            options.headers = Object.assign({}, options.headers, headers);
        }
        if (Object.keys(body).length === 0) {
            delete options.body;
        }
        return await this.helpers.requestWithAuthentication.call(this, 'tavilyApi', options);
    }
    catch (error) {
        throw error;
    }
}
exports.tavilyApiRequest = tavilyApiRequest;
//# sourceMappingURL=index.js.map